{
  "version": 3,
  "sources": ["../src/handle-error.ts", "../src/utils.ts", "../src/inputs.ts", "../src/output.ts", "../src/source.ts", "../index.ts"],
  "sourcesContent": ["let errors = 0\nlet errorCount: HTMLElement | undefined\nlet errorLog: HTMLElement | undefined\n\nfunction handleError (error: string) {\n  if (!errorLog || !errorCount) {\n    errorCount = Object.assign(document.createElement('a'), {\n      className: 'error-count',\n      href: '#errors'\n    })\n    const errorCountWrapper = Object.assign(document.createElement('h2'), {\n      className: 'error-count-wrapper'\n    })\n    errorCountWrapper.append(errorCount)\n    const note = Object.assign(document.createElement('p'), {\n      className: 'error-note',\n      textContent:\n        \"It could be due to a bug, or your input is not the correct format. If you'd like to report the error, please send me the entire error log below.\"\n    })\n    errorLog = Object.assign(document.createElement('pre'), {\n      className: 'error-log'\n    })\n    const wrapper = Object.assign(document.createElement('div'), {\n      className: 'error-wrapper',\n      id: 'errors'\n    })\n    wrapper.append(note, errorLog)\n    document.body.append(errorCountWrapper, wrapper)\n  }\n  errorLog.append(error, '\\n')\n  errors++\n  errorCount.textContent = `${errors} error${errors === 1 ? '' : 's'} occurred`\n}\n\nwindow.onerror = (message, source, line, col, error) => {\n  handleError(\n    error?.stack\n      ? `Uncaught ${error.stack}`\n      : `Uncaught ${\n          error?.name ?? String(error)\n        }: ${message} at ${source}:${line}${col !== undefined ? ':' + col : ''}`\n  )\n}\n\nwindow.addEventListener('unhandledrejection', e => {\n  handleError(\n    e.reason?.stack\n      ? `Uncaught (in promise) ${e.reason.stack}`\n      : e.reason instanceof Error\n      ? `Uncaught (in promise) ${e.reason.constructor.name}: ${e.reason.message}`\n      : String(e.reason)\n  )\n})\n", "/**\n * Based on\n * https://github.com/SheepTester/hello-world/blob/master/questionable-host/gdrive/upload-videos.ts#L17\n *\n * Note: assumes `bytes` is under a terabyte (currently shows 1 TB = 1.00e+3\n * GB).\n */\nexport function displayBytes (bytes: number): string {\n  if (bytes > 1_000_000_000) {\n    return `${(bytes / 1_000_000_000).toPrecision(3)} GB`\n  } else if (bytes > 1_000_000) {\n    return `${(bytes / 1_000_000).toPrecision(3)} MB`\n  } else if (bytes > 1_000) {\n    return `${(bytes / 1_000).toPrecision(3)} kB`\n  } else if (bytes !== 1) {\n    return `${bytes} bytes`\n  } else {\n    return '1 byte'\n  }\n}\n\n/**\n * Removes the extension of the given file name:\n * - `hello.min.js` -> `hello.min`\n * - `hey` -> `hey`\n */\nexport function fileName (name: string): string {\n  const index = name.lastIndexOf('.')\n  return index === -1 ? name : name.slice(0, index)\n}\n", "import { Source } from './source'\nimport { displayBytes, fileName } from './utils'\n\nconst encoder = new TextEncoder()\n\nfunction selectItem<T extends { type: string }> (\n  items: T[],\n  preferredTypes: string[] = []\n): T {\n  return (\n    items.find(({ type }) =>\n      preferredTypes.some(prefix => type.startsWith(prefix))\n    ) ?? items[0]\n  )\n}\nfunction getDataTransfer (\n  item: DataTransferItem\n): Promise<string | File | null> {\n  return item.kind === 'string'\n    ? new Promise<string>(resolve => item.getAsString(resolve))\n    : Promise.resolve(item.getAsFile())\n}\n\ntype FileInputOptions = {\n  fileName?: Element | null\n  input?: HTMLInputElement | null\n  dropTarget?: HTMLElement | null\n  pasteTarget?: boolean\n  /** Returns whether the file was accepted. */\n  onFile: (file: File | string) => Promise<boolean | void>\n}\nfunction handleFileInput ({\n  fileName = null,\n  input,\n  dropTarget,\n  pasteTarget,\n  onFile\n}: FileInputOptions): void {\n  const preferredTypes = input?.accept.replaceAll('*', '').split(',') ?? []\n  async function handleFile (\n    items: ArrayLike<File> | DataTransfer | null\n  ): Promise<void> {\n    if (\n      items === null ||\n      (items instanceof DataTransfer ? items.items : items).length === 0\n    ) {\n      return\n    }\n    const file =\n      items instanceof DataTransfer\n        ? await getDataTransfer(\n            selectItem(Array.from(items.items), preferredTypes)\n          )\n        : selectItem(Array.from(items), preferredTypes)\n    if (file === null) {\n      return\n    }\n    const fileNameContent =\n      file instanceof File\n        ? `${file.name} \u00B7 ${displayBytes(file.size)}`\n        : `Plain text \u00B7 ${displayBytes(encoder.encode(file).length)}`\n    try {\n      const accepted = (await onFile(file)) ?? true\n      if (accepted && fileName) {\n        fileName.textContent = fileNameContent\n        fileName.classList.remove('file-error')\n      }\n    } catch (error) {\n      if (fileName) {\n        fileName.textContent = fileNameContent + ' \u2014 failed to load'\n        fileName.classList.add('file-error')\n      }\n      throw error\n    }\n  }\n\n  input?.addEventListener('change', () => {\n    handleFile(input.files)\n    // Reset files array (so can resubmit the same file multiple times)\n    input.value = ''\n  })\n  if (input?.dataset.default) {\n    const url = input.dataset.default\n    const name = url.slice(url.lastIndexOf('/') + 1)\n    fetch(url)\n      .then(r => r.blob())\n      .catch(error => {\n        if (fileName) {\n          fileName.textContent = name + ' \u2014 failed to load'\n          fileName.classList.add('file-error')\n        }\n        throw error\n      })\n      .then(blob => handleFile([new File([blob], name, blob)]))\n  }\n\n  dropTarget?.addEventListener('drop', async e => {\n    handleFile(e.dataTransfer)\n    dropTarget.classList.remove('drag-over')\n    e.preventDefault()\n  })\n  dropTarget?.addEventListener('dragover', e => {\n    dropTarget.classList.add('drag-over')\n    e.preventDefault()\n  })\n  dropTarget?.addEventListener('dragleave', () => {\n    dropTarget.classList.remove('drag-over')\n  })\n\n  if (pasteTarget) {\n    document.addEventListener('paste', e => {\n      if (\n        (e.target instanceof HTMLTextAreaElement ||\n          e.target instanceof HTMLInputElement) &&\n        !e.target.readOnly &&\n        !e.target.disabled\n      ) {\n        return\n      }\n      handleFile(e.clipboardData)\n    })\n  }\n}\n\nexport function handleSingleFileInput (\n  source: Source<File>,\n  input?: Element | null\n): void {\n  const wrapper = input?.closest('.reform\\\\:io')\n  if (input && !(input instanceof HTMLInputElement)) {\n    console.warn(input, 'is not an <input> element')\n    input = null\n  } else if (input) {\n    input.dataset.ignore = 'true'\n  }\n  const dropTarget = wrapper?.querySelector('.input-controls')\n  handleFileInput({\n    fileName: input?.parentElement?.querySelector('.file-name'),\n    input,\n    dropTarget: dropTarget instanceof HTMLElement ? dropTarget : undefined,\n    pasteTarget: input?.classList.contains('reform:paste-target'),\n    onFile: async file => {\n      source.handleValue(\n        file instanceof File\n          ? file\n          : new File([file], 'text.txt', { type: 'text/plain' })\n      )\n    }\n  })\n}\n\nexport function handleImageInput (\n  source: Source<CanvasRenderingContext2D>,\n  input?: Element | null\n): void {\n  if (input && !(input instanceof HTMLInputElement)) {\n    console.warn(input, 'is not an <input> element')\n    input = null\n  } else if (input) {\n    input.dataset.ignore = 'true'\n  }\n  const dropTarget = input?.closest('.reform\\\\:io')\n  let maybeCanvas = dropTarget?.querySelector('.input-content canvas')\n  if (maybeCanvas && !(maybeCanvas instanceof HTMLCanvasElement)) {\n    console.warn(maybeCanvas, 'is not a <canvas> element')\n    maybeCanvas = null\n  }\n  const canvas = maybeCanvas ?? document.createElement('canvas')\n  const context = canvas.getContext('2d', {\n    willReadFrequently: !!canvas.dataset.willReadFrequently\n  })\n  if (!context) {\n    throw new TypeError(\n      'Failed to get canvas context for the image input preview.'\n    )\n  }\n  handleFileInput({\n    fileName: input?.parentElement?.querySelector('.file-name'),\n    input,\n    dropTarget: dropTarget instanceof HTMLElement ? dropTarget : undefined,\n    pasteTarget: input?.classList.contains('reform:paste-target'),\n    onFile: async file => {\n      if (typeof file === 'string') {\n        return false\n      }\n      const url = URL.createObjectURL(file)\n      try {\n        const image = document.createElement('img')\n        image.src = url\n        await new Promise((resolve, reject) => {\n          image.addEventListener('load', resolve)\n          image.addEventListener('error', () =>\n            reject(new TypeError(`Could not load '${file.name}' as image.`))\n          )\n        })\n        canvas.dataset.name = fileName(file.name)\n        canvas.width = image.width\n        canvas.height = image.height\n        context.drawImage(image, 0, 0)\n        source.handleValue(context)\n      } finally {\n        URL.revokeObjectURL(url)\n      }\n    }\n  })\n}\n\nexport function handleVideoInput (\n  source: Source<HTMLVideoElement>,\n  input?: Element | null\n): void {\n  if (input && !(input instanceof HTMLInputElement)) {\n    console.warn(input, 'is not an <input> element')\n    input = null\n  } else if (input) {\n    input.dataset.ignore = 'true'\n  }\n  const dropTarget = input?.closest('.reform\\\\:io')\n  let maybeVideo = dropTarget?.querySelector('.input-content video')\n  if (maybeVideo && !(maybeVideo instanceof HTMLVideoElement)) {\n    console.warn(maybeVideo, 'is not a <video> element')\n    maybeVideo = null\n  }\n  const video = maybeVideo ?? document.createElement('video')\n  let url: string | undefined\n  handleFileInput({\n    fileName: input?.parentElement?.querySelector('.file-name'),\n    input,\n    dropTarget: dropTarget instanceof HTMLElement ? dropTarget : undefined,\n    pasteTarget: input?.classList.contains('reform:paste-target'),\n    onFile: async file => {\n      if (typeof file === 'string') {\n        return false\n      }\n      if (url) {\n        URL.revokeObjectURL(url)\n      }\n      // Do not revoke URL or rest of video won't load\n      url = URL.createObjectURL(file)\n      video.src = url\n      video.dataset.name = fileName(file.name)\n      await new Promise<void>((resolve, reject) => {\n        video.onloadeddata = () => {\n          if (video.readyState < 2) return\n          resolve()\n        }\n        video.onerror = () =>\n          reject(new TypeError(`Could not load '${file.name}' as video.`))\n      })\n      source.handleValue(video)\n    }\n  })\n}\n\nexport function handleTextInput (\n  source: Source<string>,\n  input?: Element | null\n): void {\n  const wrapper = input?.closest('.reform\\\\:io')\n  if (input && !(input instanceof HTMLInputElement)) {\n    console.warn(input, 'is not an <input> element')\n    input = null\n  } else if (input) {\n    input.dataset.ignore = 'true'\n  }\n  const dropTarget = wrapper?.querySelector('.input-controls')\n  const textarea = wrapper?.querySelector('.input-content')\n  handleFileInput({\n    fileName: input?.parentElement?.querySelector('.file-name'),\n    input,\n    dropTarget: dropTarget instanceof HTMLElement ? dropTarget : undefined,\n    pasteTarget: input?.classList.contains('reform:paste-target'),\n    onFile: async file => {\n      const text = file instanceof File ? await file.text() : file\n      if (textarea instanceof HTMLTextAreaElement) {\n        textarea.value = text\n      }\n      source.handleValue(text)\n    }\n  })\n}\n", "import { displayBytes } from './utils'\n\nexport type OutputOptions = {\n  fileName?: Element | null\n  downloadLink?: HTMLAnchorElement | null\n  copyButton?: Element | null\n  shareButton?: Element | null\n}\nexport class Output {\n  #file: File | null = null\n  #url: string | null = null\n  #fileName: Element | null\n  #downloadLink: HTMLAnchorElement | null\n\n  constructor ({\n    fileName = null,\n    downloadLink = null,\n    copyButton,\n    shareButton\n  }: OutputOptions) {\n    this.#fileName = fileName\n    this.#downloadLink = downloadLink\n\n    copyButton?.addEventListener('click', () => {\n      if (this.#file) {\n        navigator.clipboard.write([\n          new ClipboardItem({ [this.#file.type]: this.#file })\n        ])\n      }\n    })\n\n    shareButton?.addEventListener('click', async () => {\n      if (this.#file) {\n        if (this.#file.type === 'text/plain' && this.#file.size < 4000) {\n          navigator.share({ text: await this.#file.text() })\n        } else {\n          navigator.share({ files: [this.#file] })\n        }\n      }\n    })\n  }\n\n  handleFile (file: File): void {\n    this.#file = file\n    if (this.#fileName) {\n      this.#fileName.textContent = `${file.name} \u00B7 ${displayBytes(file.size)}`\n    }\n    if (this.#downloadLink) {\n      if (this.#url) {\n        URL.revokeObjectURL(this.#url)\n      }\n      this.#url = URL.createObjectURL(file)\n      this.#downloadLink.href = this.#url\n      this.#downloadLink.download = file.name\n    }\n  }\n\n  static fromOutputControls (wrapper?: Element | null): Output {\n    let downloadLink = wrapper?.querySelector('.download')\n    if (downloadLink && !(downloadLink instanceof HTMLAnchorElement)) {\n      console.warn(downloadLink, 'is not an <a> element')\n      downloadLink = null\n    }\n    return new Output({\n      fileName: wrapper?.querySelector('.file-name'),\n      downloadLink,\n      copyButton: wrapper?.querySelector('button.icon-copy, .reform\\\\:copy'),\n      shareButton: wrapper?.querySelector('button.icon-share')\n    })\n  }\n}\n", "export class Source<T> {\n  lastValue?: T\n  dependents: ((value: T) => void)[] = []\n\n  handleValue (value: T): void {\n    // TODO: skip if the value is the same\n    this.lastValue = value\n    for (const dependent of this.dependents) {\n      dependent(value)\n    }\n  }\n}\n", "import './reform.css'\nimport './src/handle-error'\nimport {\n  handleImageInput,\n  handleSingleFileInput,\n  handleTextInput,\n  handleVideoInput\n} from './src/inputs'\nimport { Output } from './src/output'\nimport { Source } from './src/source'\n\nconst sources: Record<string, Source<any>> = {}\n\n/**\n * Determines the source type from the element and sets the value if necessary.\n * Called during initialization and by input/change events.\n */\nfunction handleElement (element: unknown): void {\n  if (element instanceof HTMLElement && element.dataset.ignore) {\n    return\n  }\n  if (element instanceof HTMLInputElement) {\n    sources[element.name] ??= new Source()\n    if (\n      element.type === 'number' ||\n      element.type === 'range' ||\n      element.inputMode === 'numeric'\n    ) {\n      if (element.value === '') {\n        return\n      }\n      // valueAsNumber is not available for type=text\n      // https://stackoverflow.com/a/18062487\n      sources[element.name].handleValue(+element.value)\n      const rangeWrapper = element.closest('.range-wrapper')\n      if (rangeWrapper) {\n        let range = element\n        if (element.type === 'range') {\n          const input = rangeWrapper.lastElementChild\n          if (input instanceof HTMLInputElement) {\n            input.value =\n              element.step === 'any' || (element.step && +element.step < 0.1)\n                ? (+element.value).toFixed(2)\n                : element.value\n          }\n        } else {\n          const rangeInput = rangeWrapper.querySelector('[type=\"range\"]')\n          if (rangeInput instanceof HTMLInputElement) {\n            range = rangeInput\n          } else {\n            return\n          }\n          range.value = element.value\n        }\n        const progress =\n          (+element.value - +range.min) / (+range.max - +range.min)\n        range.style.setProperty('--progress', `${progress * 100}%`)\n      }\n    } else if (element.type === 'checkbox') {\n      sources[element.name].handleValue(element.checked)\n    } else if (element.type === 'file') {\n      if (element.files && element.files.length > 0) {\n        sources[element.name].handleValue(Array.from(element.files))\n      }\n    } else if (element.type === 'radio') {\n      if (element.checked) {\n        sources[element.name].handleValue(element.value)\n      }\n    } else {\n      sources[element.name].handleValue(element.value)\n    }\n  } else if (\n    element instanceof HTMLTextAreaElement ||\n    element instanceof HTMLSelectElement\n  ) {\n    sources[element.name] ??= new Source()\n    sources[element.name].handleValue(element.value)\n  }\n}\n\nfor (const input of document.getElementsByClassName('reform:image-input')) {\n  if (!(input instanceof HTMLInputElement)) {\n    continue\n  }\n  sources[input.name] ??= new Source()\n  handleImageInput(sources[input.name], input)\n}\nfor (const input of document.getElementsByClassName('reform:video-input')) {\n  if (!(input instanceof HTMLInputElement)) {\n    continue\n  }\n  sources[input.name] ??= new Source()\n  handleVideoInput(sources[input.name], input)\n}\nfor (const input of document.getElementsByClassName('reform:text-input')) {\n  if (!(input instanceof HTMLInputElement)) {\n    continue\n  }\n  sources[input.name] ??= new Source()\n  handleTextInput(sources[input.name], input)\n}\nfor (const input of document.getElementsByClassName('reform:file-input')) {\n  if (!(input instanceof HTMLInputElement)) {\n    continue\n  }\n  sources[input.name] ??= new Source()\n  handleSingleFileInput(sources[input.name], input)\n}\n\nfor (const form of document.forms) {\n  for (const element of form.elements) {\n    handleElement(element)\n  }\n}\n\ndocument.addEventListener('input', e => handleElement(e.target))\ndocument.addEventListener('change', e => handleElement(e.target))\n\nexport type SourceSpec =\n  | {\n      name: string\n      deps?: string[]\n    }\n  | string\ntype Dep = {\n  name: string\n  reference: boolean\n}\ntype Object = {\n  name: string\n  element: HTMLElement\n  object: HTMLElement | CanvasRenderingContext2D | null\n  deps: Dep[]\n}\nconst objects: Record<string, Object> = {}\n\nfunction findObjectByName (spec: SourceSpec): Object {\n  const name = typeof spec === 'string' ? spec : spec.name\n  if (!objects[name]) {\n    let element = document.getElementById(name)\n    if (!element) {\n      const elements = document.getElementsByName(name)\n      if (elements.length > 1) {\n        console.warn(\n          'More than one element with name',\n          name,\n          Array.from(elements)\n        )\n      }\n      element = elements[0] ?? null\n    }\n    const object =\n      element instanceof HTMLCanvasElement ? element.getContext('2d') : element\n    const deps =\n      (typeof spec !== 'string' && spec.deps) ||\n      element?.dataset.deps?.split(' ') ||\n      []\n    objects[name] = {\n      name,\n      element,\n      object,\n      deps: deps.map(dep =>\n        dep.startsWith('&')\n          ? { name: dep.slice(1), reference: true }\n          : { name: dep, reference: false }\n      )\n    }\n  }\n\n  return objects[name]\n}\n\nexport function on<T> (\n  spec: SourceSpec,\n  callback: (\n    object: HTMLElement | CanvasRenderingContext2D | null,\n    args: Record<string, unknown>\n  ) => Promise<T>\n): void {\n  const { name, element, object, deps } = findObjectByName(spec)\n  sources[name] ??= new Source()\n\n  const args: Record<string, unknown> = {\n    // Call `callback` to return multiple values\n    callback: (value: unknown) => {\n      sources[name].handleValue(value)\n    }\n  }\n\n  const outputControls = element\n    ?.closest('.reform\\\\:io')\n    ?.querySelector('.output-controls')\n  if (outputControls) {\n    const output = Output.fromOutputControls(outputControls)\n    sources[name].dependents.push(\n      file => file instanceof File && output.handleFile(file)\n    )\n  }\n\n  const compute = async () => {\n    if (ready.size === deps.length) {\n      const value = await callback(object, args)\n      if (value !== undefined) {\n        sources[name].handleValue(value)\n      }\n    }\n  }\n\n  const ready = new Set<string>()\n  for (const { name: dep, reference } of deps) {\n    if (reference) {\n      const { object } = findObjectByName(dep)\n      args[dep] = object\n      ready.add(dep)\n    } else {\n      sources[dep] ??= new Source()\n      if (sources[dep].lastValue !== undefined) {\n        args[dep] = sources[dep].lastValue\n        ready.add(dep)\n      }\n      sources[dep].dependents.push(value => {\n        args[dep] = value\n        ready.add(dep)\n        compute()\n      })\n    }\n  }\n  compute()\n}\n"],
  "mappings": "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",
  "names": ["errors", "errorCount", "errorLog", "handleError", "error", "errorCountWrapper", "note", "wrapper", "message", "source", "line", "col", "displayBytes", "bytes", "fileName", "name", "index", "encoder", "selectItem", "items", "preferredTypes", "type", "prefix", "getDataTransfer", "item", "resolve", "handleFileInput", "fileName", "input", "dropTarget", "pasteTarget", "onFile", "handleFile", "file", "fileNameContent", "displayBytes", "error", "url", "name", "r", "blob", "e", "handleSingleFileInput", "source", "wrapper", "handleImageInput", "maybeCanvas", "canvas", "context", "image", "reject", "handleVideoInput", "maybeVideo", "video", "handleTextInput", "textarea", "text", "Output", "_Output", "#file", "#url", "#fileName", "#downloadLink", "fileName", "downloadLink", "copyButton", "shareButton", "file", "displayBytes", "wrapper", "Source", "value", "dependent", "sources", "handleElement", "element", "Source", "rangeWrapper", "range", "input", "rangeInput", "progress", "handleImageInput", "handleVideoInput", "handleTextInput", "handleSingleFileInput", "form", "objects", "findObjectByName", "spec", "name", "elements", "object", "deps", "dep", "on", "callback", "args", "value", "outputControls", "output", "Output", "file", "compute", "ready", "reference"]
}
